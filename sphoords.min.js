var Sphoords=function(){var e=function(){var e=navigator.userAgent;return/Gecko\/[0-9.]+/.test(e)?"Gecko":/Chrome\/[0-9.]+/.test(e)?"Blink":/AppleWebKit\/[0-9.]+/.test(e)?"WebKit":/Trident\/[0-9.]+/.test(e)?"Trident":/Opera\/[0-9.]+/.test(e)?"Presto":"Gecko"},t=function(e){return e-360*Math.floor(e/360)};this.start=function(){return Sphoords.isDeviceOrientationSupported?(window.addEventListener("deviceorientation",n,!1),r=!0,!0):(console.log("Device Orientation API not supported"),!1)},this.stop=function(){r&&(window.removeEventListener("deviceorientation",n,!1),r=!1)},this.toggle=function(){r?this.stop():this.start()},this.isEventAttached=function(){return r};var n=function(e){u=Sphoords.getScreenOrientation();var n=0,r=0;switch(u){case"portrait-primary":n=e.alpha+e.gamma,r=e.beta-90;break;case"landscape-primary":if(n=e.alpha+e.beta-90,r=-e.gamma-90,Math.abs(e.beta)>90)switch(h){case"Blink":r+=180;break;case"Gecko":default:r=-r}break;case"landscape-secondary":if(n=e.alpha-e.beta+90,r=e.gamma-90,Math.abs(e.beta)>90)switch(h){case"Blink":r+=180;break;case"Gecko":default:r=-r}break;case"portrait-secondary":n=e.alpha-e.gamma,r=180-(e.beta-90),r=270-e.beta}r=t(r),r>=180&&(r-=360),o=t(n),a=Math.max(-90,Math.min(90,r)),s=o*d,c=a*d,i()};this.getCoordinates=function(){return{longitude:s,latitude:c}},this.getCoordinatesInDegrees=function(){return{longitude:o,latitude:a}},this.getScreenOrientation=function(){return u},this.addListener=function(e){l.push(e)};var i=function(){if(l.length)for(var e=0,t=l.length;t>e;++e)l[e]({longitude:s,latitude:c})},r=!1,o=0,a=0,s=0,c=0,d=Math.PI/180,u=Sphoords.getScreenOrientation(),h=e(),l=[]};Sphoords.getScreenOrientation=function(){var e=null;return screen.orientation?e=screen.orientation:screen.mozOrientation?e=screen.mozOrientation:screen.msOrientation&&(e=screen.msOrientation),null!==e&&"object"==typeof e?e.type:e},Sphoords.isDeviceOrientationSupported=!1,function(){function e(t){null!==t&&null!==t.alpha&&(Sphoords.isDeviceOrientationSupported=!0,window.removeEventListener("deviceorientation",e))}window.DeviceOrientationEvent&&null!==Sphoords.getScreenOrientation()&&window.addEventListener("deviceorientation",e)}();